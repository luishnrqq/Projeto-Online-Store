{"ast":null,"code":"var _jsxFileName = \"/home/lois/Documentos/Luis_projects/Online-store/src/pages/ProductDetails.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { addProducts } from '../components/Functions';\nimport Avaliacao from '../components/Avaliacao';\n\nclass ProductDetails extends React.Component {\n  constructor() {\n    super();\n\n    this.clickToSave = () => {\n      const {\n        product\n      } = this.state;\n      const {\n        title,\n        thumbnail,\n        price,\n        id\n      } = product;\n      addProducts({\n        ProductsId: id,\n        ProductsPrice: price,\n        ProductsName: title,\n        ProductsImg: thumbnail\n      });\n    };\n\n    this.submitAvaliation = event => {\n      event.preventDefault();\n      const {\n        email,\n        productRate,\n        rating\n      } = this.state;\n      const rate = {\n        email,\n        productRate,\n        rating\n      };\n      this.setState(_ref => {\n        let {\n          avaliations\n        } = _ref;\n        return {\n          avaliations: [...avaliations, rate]\n        };\n      }, this.saveLocalStorage);\n    };\n\n    this.saveLocalStorage = () => {\n      const {\n        avaliations\n      } = this.state;\n      localStorage.setItem('avaliacoes', JSON.stringify(avaliations));\n    };\n\n    this.recebeLocalStorage = () => {\n      const getFromStorage = JSON.parse(localStorage.getItem('avaliacoes'));\n\n      if (!getFromStorage || getFromStorage.lenght === 0) {\n        this.saveLocalStorage();\n      } else {\n        this.setState({\n          avaliations: getFromStorage\n        });\n        localStorage.setItem('avaliacoes', [JSON.stringify(getFromStorage)]);\n      }\n    };\n\n    this.handleChange = _ref2 => {\n      let {\n        target\n      } = _ref2;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.state = {\n      product: {},\n      email: '',\n      productRate: '',\n      rating: '',\n      avaliations: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      match\n    } = this.props;\n    const {\n      params\n    } = match;\n    const {\n      id\n    } = params;\n    fetch(`https://api.mercadolibre.com/items/${id}`).then(response => response.json()).then(data => this.setState({\n      product: data\n    }));\n    this.recebeLocalStorage();\n  }\n\n  render() {\n    const {\n      product,\n      avaliations\n    } = this.state;\n    const {\n      title,\n      thumbnail,\n      price,\n      attributes\n    } = product;\n    const {\n      email,\n      productRate\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"product-detail-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \"R$\", price), /*#__PURE__*/React.createElement(\"img\", {\n      src: thumbnail,\n      alt: \"product-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, \"Especifica\\xE7\\xF5es T\\xE9cnicas\"), attributes && attributes.map(atributos => /*#__PURE__*/React.createElement(\"div\", {\n      key: atributos.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, `${atributos.name}:${atributos.value_name}`)))), /*#__PURE__*/React.createElement(Link, {\n      to: \"/ShoppingCart\",\n      \"data-testid\": \"shopping-cart-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      role: \"img\",\n      \"aria-label\": \"emojiCarrinho\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, \"\\uD83D\\uDED2\")), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"product-detail-add-to-cart\",\n      onClick: this.clickToSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, \"Add ao Carrinho\"), /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"avaliacao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, \"Avalia\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"product-detail-email\",\n      type: \"email\",\n      name: \"email\",\n      id: \"email\",\n      value: email,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"check-boexes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, \"1\", /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"1-rating\",\n      type: \"radio\",\n      name: \"rating\",\n      value: \"1\",\n      onClick: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }), \"2\", /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"2-rating\",\n      type: \"radio\",\n      name: \"rating\",\n      value: \"2\",\n      onClick: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }), \"3\", /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"3-rating\",\n      type: \"radio\",\n      name: \"rating\",\n      value: \"3\",\n      onClick: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }), \"4\", /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"4-rating\",\n      type: \"radio\",\n      name: \"rating\",\n      value: \"4\",\n      onClick: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }), \"5\", /*#__PURE__*/React.createElement(\"input\", {\n      \"data-testid\": \"5-rating\",\n      type: \"radio\",\n      name: \"rating\",\n      value: \"5\",\n      onClick: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"message-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"productRate\",\n      id: \"productRate\",\n      value: productRate,\n      \"data-testid\": \"product-detail-evaluation\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"submit-review-btn\",\n      onClick: this.submitAvaliation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, \"Avaliar\"))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"todas-avaliacoes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, avaliations.map(rating => /*#__PURE__*/React.createElement(Avaliacao, {\n      key: rating.productRate,\n      email: rating.email,\n      productRate: rating.productRate,\n      rating: rating.rating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }))));\n  }\n\n}\n\nProductDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.objectOf(PropTypes.number)\n  }).isRequired,\n  email: PropTypes.string.isRequired,\n  productRate: PropTypes.string.isRequired\n};\nexport default ProductDetails;","map":{"version":3,"sources":["/home/lois/Documentos/Luis_projects/Online-store/src/pages/ProductDetails.jsx"],"names":["React","PropTypes","Link","addProducts","Avaliacao","ProductDetails","Component","constructor","clickToSave","product","state","title","thumbnail","price","id","ProductsId","ProductsPrice","ProductsName","ProductsImg","submitAvaliation","event","preventDefault","email","productRate","rating","rate","setState","avaliations","saveLocalStorage","localStorage","setItem","JSON","stringify","recebeLocalStorage","getFromStorage","parse","getItem","lenght","handleChange","target","name","value","componentDidMount","match","props","params","fetch","then","response","json","data","render","attributes","map","atributos","value_name","propTypes","shape","objectOf","number","isRequired","string"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { addProducts } from '../components/Functions';\nimport Avaliacao from '../components/Avaliacao';\n\nclass ProductDetails extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      product: {},\n      email: '',\n      productRate: '',\n      rating: '',\n      avaliations: [],\n    };\n  }\n\n  componentDidMount() {\n    const { match } = this.props;\n    const { params } = match;\n    const { id } = params;\n    fetch(`https://api.mercadolibre.com/items/${id}`)\n      .then((response) => response.json())\n      .then((data) => this.setState({\n        product: data,\n      }));\n    this.recebeLocalStorage();\n  }\n\n  clickToSave = () => {\n    const { product } = this.state;\n    const { title, thumbnail, price, id } = product;\n    addProducts({\n      ProductsId: id,\n      ProductsPrice: price,\n      ProductsName: title,\n      ProductsImg: thumbnail });\n  }\n\n  submitAvaliation = (event) => {\n    event.preventDefault();\n    const {\n      email,\n      productRate,\n      rating,\n    } = this.state;\n    const rate = { email, productRate, rating };\n    this.setState(({ avaliations }) => (\n      { avaliations: [...avaliations, rate] }\n    ), this.saveLocalStorage);\n  }\n\n  saveLocalStorage = () => {\n    const { avaliations } = this.state;\n    localStorage.setItem('avaliacoes', JSON.stringify(avaliations));\n  }\n\n  recebeLocalStorage = () => {\n    const getFromStorage = JSON.parse(localStorage.getItem('avaliacoes'));\n    if (!getFromStorage || (getFromStorage.lenght === 0)) {\n      this.saveLocalStorage();\n    } else {\n      this.setState({ avaliations: getFromStorage });\n      localStorage.setItem('avaliacoes', [JSON.stringify(getFromStorage)]);\n    }\n  }\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  render() {\n    const { product, avaliations } = this.state;\n    const { title, thumbnail, price, attributes } = product;\n    const { email, productRate } = this.props;\n    return (\n      <section>\n        <p data-testid=\"product-detail-name\">{ title }</p>\n        <p>\n          R$\n          { price }\n        </p>\n        <img src={ thumbnail } alt=\"product-name\" />\n        <section>\n          <p>Especificações Técnicas</p>\n          {attributes\n          && attributes.map((atributos) => (\n            <div key={ atributos.id }>\n              <span>{`${atributos.name}:${atributos.value_name}`}</span>\n            </div>\n          ))}\n        </section>\n        <Link\n          to=\"/ShoppingCart\"\n          data-testid=\"shopping-cart-button\"\n        >\n          <span role=\"img\" aria-label=\"emojiCarrinho\">🛒</span>\n        </Link>\n        <button\n          type=\"button\"\n          data-testid=\"product-detail-add-to-cart\"\n          onClick={ this.clickToSave }\n        >\n          Add ao Carrinho\n        </button>\n        <section>\n          <form className=\"avaliacao\">\n            <label htmlFor=\"email-input\">\n              <h3>Avaliações</h3>\n              <input\n                data-testid=\"product-detail-email\"\n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n                value={ email }\n                onChange={ this.handleChange }\n              />\n            </label>\n            <label htmlFor=\"check-boexes\">\n              1\n              <input\n                data-testid=\"1-rating\"\n                type=\"radio\"\n                name=\"rating\"\n                value=\"1\"\n                onClick={ this.handleChange }\n              />\n              2\n              <input\n                data-testid=\"2-rating\"\n                type=\"radio\"\n                name=\"rating\"\n                value=\"2\"\n                onClick={ this.handleChange }\n              />\n              3\n              <input\n                data-testid=\"3-rating\"\n                type=\"radio\"\n                name=\"rating\"\n                value=\"3\"\n                onClick={ this.handleChange }\n              />\n              4\n              <input\n                data-testid=\"4-rating\"\n                type=\"radio\"\n                name=\"rating\"\n                value=\"4\"\n                onClick={ this.handleChange }\n              />\n              5\n              <input\n                data-testid=\"5-rating\"\n                type=\"radio\"\n                name=\"rating\"\n                value=\"5\"\n                onClick={ this.handleChange }\n              />\n            </label>\n            <label htmlFor=\"message-input\">\n              <textarea\n                name=\"productRate\"\n                id=\"productRate\"\n                value={ productRate }\n                data-testid=\"product-detail-evaluation\"\n                onChange={ this.handleChange }\n              />\n            </label>\n            <button\n              type=\"button\"\n              data-testid=\"submit-review-btn\"\n              onClick={ this.submitAvaliation }\n            >\n              Avaliar\n            </button>\n          </form>\n        </section>\n        <section className=\"todas-avaliacoes\">\n          {avaliations\n            .map((rating) => (\n              <Avaliacao\n                key={ rating.productRate }\n                email={ rating.email }\n                productRate={ rating.productRate }\n                rating={ rating.rating }\n              />\n            ))}\n        </section>\n      </section>\n    );\n  }\n}\n\nProductDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.objectOf(PropTypes.number),\n  }).isRequired,\n  email: PropTypes.string.isRequired,\n  productRate: PropTypes.string.isRequired,\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}